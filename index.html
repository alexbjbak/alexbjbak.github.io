<!DOCTYPE html>
<html lang="en" itemscope itemtype="https://schema.org/Person">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title itemprop="name">Alex B. Bak</title>
<meta itemprop="jobTitle" content="Anesthesiology Resident">
<meta itemprop="affiliation" content="University of Toronto">
<meta itemprop="description" content="Alex Bak is an anesthesiology resident at the University of Toronto with interests in perioperative outcomes and biomedical engineering.">

<style>
:root {
    --bg-color: #fafafa;
    --text-color: #222;
    --card-bg: #fff;
    --card-shadow: rgba(0,0,0,0.05);
    --subtitle-color: #666;
    --link-color: #444;
}
@media (prefers-color-scheme: dark) {
    :root {
        --bg-color: #121212;
        --text-color: #e0e0e0;
        --card-bg: #1e1e1e;
        --card-shadow: rgba(0,0,0,0.4);
        --subtitle-color: #aaa;
        --link-color: #bbb;
    }
}
body {
    font-family: 'Inter', Arial, sans-serif;
    margin: 0;
    padding: 0;
    background: var(--bg-color);
    color: var(--text-color);
}
header {
    padding: 40px 20px;
    text-align: center;
}
h1 {
    font-size: 2.4rem;
    margin-bottom: 0.2rem;
}
.subtitle {
    color: var(--subtitle-color);
    font-size: 1rem;
}
.container {
    max-width: 900px;
    margin: 0 auto;
    padding: 20px;
    display: grid;
    grid-template-columns: 280px 1fr;
    gap: 30px;
}
.profile-card {
    background: var(--card-bg);
    padding: 20px;
    border-radius: 14px;
    box-shadow: 0 4px 20px var(--card-shadow);
    text-align: center;
    height: fit-content;
    display: flex;
    flex-direction: column;
    gap: 20px;
}
.profile-card img {
    width: 100%;
    border-radius: 10px;
}
.social a {
    color: var(--link-color);
    margin: 0 8px;
    text-decoration: none;
    font-weight: 500;
}
.section {
    background: var(--card-bg);
    padding: 25px;
    border-radius: 14px;
    box-shadow: 0 4px 20px var(--card-shadow);
    margin-bottom: 20px;
}
.section h2 {
    font-size: 1.3rem;
    margin-bottom: 15px;
}
.section h4 {
    margin: 12px 0 5px;
}
@media (max-width: 780px) {
    .container {
        grid-template-columns: 1fr;
    }
}
#pub-list p {
    margin: 10px 0;
    line-height: 1.4;
    font-size: 0.95rem;
}
#pub-controls {
    display: flex;
    gap: 10px;
    align-items: center;
    margin-bottom: 12px;
}
#refresh-btn {
    padding: 6px 10px;
    border-radius: 8px;
    border: 1px solid #ddd;
    background: var(--card-bg);
    cursor: pointer;
    color: var(--text-color);
}
#last-updated {
    color: var(--subtitle-color);
    font-size: 0.9rem;
}
a {
    color: var(--link-color);
}
.news-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 15px;
}
.news-card {
    background: var(--card-bg);
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 15px var(--card-shadow);
    display: flex;
    flex-direction: column;
    transition: transform 0.2s;
}
.news-card:hover {
    transform: scale(1.02);
}
.news-card img {
    width: 100%;
    height: 120px;
    object-fit: cover;
}
.news-card a {
    padding: 10px;
    text-decoration: none;
    color: var(--text-color);
    font-size: 0.95rem;
    flex: 1;
}
.news-section {
    margin-top: 20px;
}
</style>
</head>
<body>
<header>
    <h1 itemprop="name">Alex B. Bak</h1>
    <div class="subtitle">Anesthesiology Resident • University of Toronto</div>
</header>
<div class="container">
<aside>
    <div class="profile-card" itemprop="image" itemscope itemtype="https://schema.org/ImageObject">
        <img src="images/headshot1.jpeg" alt="Alex B Bak headshot" itemprop="contentUrl">
        <div class="social" itemprop="sameAs">
            <a href="https://scholar.google.com/citations?user=TnT6AcUAAAAJ&hl=en" target="_blank" rel="noopener">Google Scholar</a>
            <a href="https://x.com/AlexBak_" target="_blank" rel="noopener">Twitter</a>
            <a href="https://www.linkedin.com/in/alexbbak/" target="_blank" rel="noopener">LinkedIn</a>
        </div>
        <section class="section news-section" id="news">
            <h2>News</h2>
            <div class="news-grid" id="news-list">
                <!-- News articles will be inserted here -->
            </div>
        </section>
    </div>
</aside>
<main>
<section class="section" itemprop="description">
    <h2>Bio</h2>
    <p>Alex Bak is an anesthesiology resident at the University of Toronto. He grew up splitting his time between Seoul and the countryside of South Korea, later moving to Southern Ontario. During medical school, he pursued advanced training in biomedical engineering.</p>
    <p>Alex has published in several peer-reviewed journals and has been funded by the Institute of Medical Science and the University of Toronto Faculty of Medicine.</p>
    <p>His current interests focus on improving perioperative outcomes.</p>
</section>
<section class="section">
    <h2>Education</h2>
    <h4>University of Toronto</h4>
    <p>M.D. in Medicine — 2024<br>M.Eng in Biomedical Engineering — 2023</p>
    <h4>McMaster University</h4>
    <p>BHSc (Honours) in Health Sciences — 2020</p>
</section>
<section class="section">
    <h2>Experience</h2>
    <p><strong>Resident Physician, Anesthesiology</strong><br>University of Toronto (2024–Present)</p>
</section>
<section class="section" id="publications">
    <h2>Publications</h2>
    <div id="pub-controls">
        <button id="refresh-btn" title="Force refresh publications">Refresh</button>
        <div id="last-updated">Last updated: <span id="last-updated-time">—</span></div>
    </div>
    <div id="pub-list">Loading publications...</div>
</section>
</main>
</div>
<script>
async function loadPublications(forceRefresh=false){
    const cacheKey="pub_cache_html";
    const cacheTimeKey="pub_cache_time";
    const maxAge=1000*60*60*6;
    try{
        const now=Date.now();
        const cached=localStorage.getItem(cacheKey);
        const cachedTime=parseInt(localStorage.getItem(cacheTimeKey)||"0",10);
        if(!forceRefresh && cached && cachedTime && now-cachedTime<maxAge){
            document.getElementById("pub-list").innerHTML=cached;
            document.getElementById("last-updated-time").innerText=new Date(cachedTime).toLocaleString();
            return;
        }
        const query=encodeURIComponent("Alex Bak[author]");
        const esearchUrl=`https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pubmed&term=${query}&retmode=json&retmax=100`;
        const esearchRes=await fetch(esearchUrl);
        const esearchData=await esearchRes.json();
        const ids=esearchData?.esearchresult?.idlist||[];
        if(!ids.length){
            const noHtml='<p>No publications found.</p>';
            document.getElementById("pub-list").innerHTML=noHtml;
            localStorage.setItem(cacheKey,noHtml);
            localStorage.setItem(cacheTimeKey,Date.now().toString());
            document.getElementById("last-updated-time").innerText=new Date().toLocaleString();
            return;
        }
        const idString=ids.join(",");
        const esummaryUrl=`https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi?db=pubmed&id=${idString}&retmode=json`;
        const esummaryRes=await fetch(esummaryUrl);
        const esummaryData=await esummaryRes.json();
        let results=Object.values(esummaryData.result).filter(r=>r&&r.uid);
        results.sort((a,b)=>{const ay=a.pubdate?a.pubdate.substring(0,4)|0:0;const by=b.pubdate?b.pubdate.substring(0,4)|0:0;return by-ay;});
        let html='';let counter=1;
        for(const pub of results){
            let authors=(pub.authors||[]).map(a=>a.name||a);
            if(authors.length>3){authors=authors.slice(0,3).join(', ')+', et al.';}else{authors=authors.join(', ');}
            const title=pub.title||pub.article_title||'';
            const year=pub.pubdate?pub.pubdate.substring(0,4):'';
            const journal=pub.source||pub.fulljournalname||'';
            let doi=null;if(Array.isArray(pub.articleids)){const doiObj=pub.articleids.find(id=>id.idtype && id.idtype.toLowerCase()==='doi');if(doiObj)doi=doiObj.value||null;}
            const pmLink=pub.uid?`https://pubmed.ncbi.nlm.nih.gov/${pub.uid}/`:null;
            html+=`<p>${counter}. ${escapeHtml(authors)} <strong>${escapeHtml(title)}</strong>. <em>${escapeHtml(journal)}</em> ${year?'. '+escapeHtml(year)+'.':''}`;
            if(doi) html+=` <a href="https://doi.org/${encodeURIComponent(doi)}" target="_blank" rel="noopener">doi:${escapeHtml(doi)}</a>`;
            if(pmLink) html+=` <a href="${pmLink}" target="_blank" rel="noopener">PubMed</a>`;
            html+='</p>';counter++;
        }
        document.getElementById("pub-list").innerHTML=html;
        localStorage.setItem(cacheKey,html);
        localStorage.setItem(cacheTimeKey,Date.now().toString());
        document.getElementById("last-updated-time").innerText=new Date().toLocaleString();
    }catch(err){console.error('Error loading publications:',err);document.getElementById("pub-list").innerText="Error loading publications.";}
}
function escapeHtml(str){if(!str)return'';return String(str).replace(/[&<>"'`]/g,s=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;",'`':'&#96;'})[s]);}
document.addEventListener('DOMContentLoaded',()=>{
    document.getElementById('refresh-btn').addEventListener('click',()=>{loadPublications(true);});
    loadPublications();
    loadNews();
});
async function loadNews(){
    const newsList = document.getElementById('news-list');
    newsList.innerHTML='<p>Loading news...</p>';
    try{
        const newsData=[
            {title:'Alex Bak publishes new study on perioperative outcomes',url:'#',thumbnail:'images/news1.jpg'},
            {title:'Interview with Alex Bak on anesthesiology research',url:'#',thumbnail:'images/news2.jpg'},
            {title:'University of Toronto highlights Alex Bak's research',url:'#',thumbnail:'images/news3.jpg'}
        ];
        newsList.innerHTML='';
        for(const news of newsData){
            const card=document.createElement('div');
            card.className='news-card';
            card.innerHTML=`<a href="${news.url}" target="_blank" rel="noopener"><img src="${news.thumbnail}" alt="${escapeHtml(news.title)}"><div>${escapeHtml(news.title)}</div></a>`;
            newsList.appendChild(card);
        }
    }catch(err){console.error('Error loading news:',err);newsList.innerHTML='<p>Error loading news.</p>';}
}
</script>
</body>
</html>
