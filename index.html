<!DOCTYPE html>
<html lang="en" itemscope itemtype="https://schema.org/Person">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title itemprop="name">Alex B. Bak</title>
<meta itemprop="jobTitle" content="Anesthesiology Resident">
<meta itemprop="affiliation" content="University of Toronto">
<meta itemprop="description" content="Alex Bak is an anesthesiology resident at the University of Toronto with interests in perioperative outcomes and biomedical engineering.">

<style>
:root {
    --bg-color: #fafafa;
    --text-color: #222;
    --card-bg: #fff;
    --card-shadow: rgba(0,0,0,0.05);
    --subtitle-color: #666;
    --link-color: #444;
}
@media (prefers-color-scheme: dark) {
    :root {
        --bg-color: #121212;
        --text-color: #e0e0e0;
        --card-bg: #1e1e1e;
        --card-shadow: rgba(0,0,0,0.4);
        --subtitle-color: #aaa;
        --link-color: #bbb;
    }
}
body {
    font-family: 'Inter', Arial, sans-serif;
    margin: 0;
    padding: 0;
    background: var(--bg-color);
    color: var(--text-color);
}
header {
    padding: 40px 20px;
    text-align: center;
}
h1 { font-size: 2.4rem; margin-bottom: 0.2rem; }
.subtitle { color: var(--subtitle-color); font-size: 1rem; }

.container {
    max-width: 900px;
    margin: 0 auto;
    padding: 20px;
    display: grid;
    grid-template-columns: 280px 1fr;
    gap: 30px;
}

.profile-card {
    background: var(--card-bg);
    padding: 20px;
    border-radius: 14px;
    box-shadow: 0 4px 20px var(--card-shadow);
    text-align: center;
    display: flex;
    flex-direction: column;
    gap: 20px;
}
.profile-card img {
    width: 100%;
    height: 300px;
    object-fit: cover;
    border-radius: 10px;
}

.section {
    background: var(--card-bg);
    padding: 25px;
    border-radius: 14px;
    box-shadow: 0 4px 20px var(--card-shadow);
    margin-bottom: 20px;
}
.section h2 { font-size: 1.3rem; margin-bottom: 15px; }

/* NEWS SECTION */
#news-grid {
    display: flex;
    flex-direction: column;
    gap: 18px;
    align-items: center;
}
.news-card {
    width: 80%;
    max-width: 220px;
    text-align: center;
    position: relative;
}
.news-card img {
    width: 100%;
    height: 120px;
    border-radius: 10px;
    object-fit: cover;

    /* Black ‚Üí transparent white gradient overlay */
    mask-image: linear-gradient(to bottom, rgba(0,0,0,0.9), rgba(255,255,255,0.3));
    -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,0.9), rgba(255,255,255,0.3));
}

.news-card p {
    margin-top: 6px;
    font-size: 0.9rem;
    color: var(--text-color);
}

/* Adventure Stats */
.stats-grid {
    display: flex;
    gap: 6px;
    justify-content: center;
    margin-top: 10px;
}
.stat-card {
    background: var(--card-bg);
    border-radius: 12px;
    box-shadow: 0 4px 20px var(--card-shadow);
    padding: 6px 4px;
    text-align: center;
    flex: 1;
    min-width: 60px;
}
.stat-label { 
    color: var(--subtitle-color); 
    font-size: 0.7rem; 
    margin-bottom: 3px; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    gap:3px; 
}
.stat-number { font-size: 1rem; font-weight: bold; color: var(--text-color); }

@media (max-width: 780px) { 
    .container { grid-template-columns: 1fr; }
    .stats-grid { flex-direction: column; gap: 10px; }
}

/* Publications */
#pub-list p { margin: 10px 0; line-height: 1.4; font-size: 0.95rem; }
#pub-controls { display: flex; gap: 10px; align-items: center; margin-bottom: 12px; }
#refresh-btn {
    padding: 6px 10px; border-radius: 8px; border: 1px solid #ddd;
    background: var(--card-bg); cursor: pointer; color: var(--text-color);
}
#last-updated { color: var(--subtitle-color); font-size: 0.9rem; }

a { color: var(--link-color); text-decoration: none; }

</style>
</head>
<body>

<header>
    <h1 itemprop="name">Alex B. Bak</h1>
    <div class="subtitle">Anesthesiology Resident ‚Ä¢ University of Toronto</div>
</header>

<div class="container">

<!-- LEFT SIDE -->
<aside>
    <div class="profile-card">
        <img src="images/headshot1.jpeg" alt="Alex B Bak headshot" itemprop="image">

        <div class="social">
            <a href="https://scholar.google.com/citations?user=TnT6AcUAAAAJ&hl=en" target="_blank">Google Scholar</a>
            <a href="https://www.linkedin.com/in/alexbbak/" target="_blank">LinkedIn</a>
        </div>

        <!-- IN THE NEWS -->
        <section class="section news-section" id="news">
          <h2>In the News</h2>
          <div id="news-grid"></div>
        </section>

        <!-- Adventure Stats -->
        <section class="section stats-section">
            <h2>Adventure Stats</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Countries üåç</div>
                    <div class="stat-number" id="countries-counter">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Ski Areas üéø</div>
                    <div class="stat-number" id="ski-counter">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Dives ü§ø</div>
                    <div class="stat-number" id="dives-counter">0</div>
                </div>
            </div>
        </section>

    </div>
</aside>

<!-- RIGHT SIDE -->
<main>

<section class="section" itemprop="description">
    <h2>Bio</h2>
    <p>Alex Bak is an anesthesiology resident at the University of Toronto...</p>
</section>

<section class="section">
    <h2>Education</h2>
    <p><strong>University of Toronto</strong><br>M.D. ‚Äî 2024<br>M.Eng ‚Äî 2023</p>
    <p><strong>McMaster University</strong><br>BHSc ‚Äî 2020</p>
</section>

<section class="section">
    <h2>Experience</h2>
    <p><strong>Resident Physician, Anesthesiology</strong><br>University of Toronto (2024‚ÄìPresent)</p>
</section>

<!-- Publications Section -->
<section class="section" id="publications">
    <h2>Publications</h2>
    <div id="pub-controls">
        <button id="refresh-btn">Refresh</button>
        <div id="last-updated">Last updated: <span id="last-updated-time">‚Äî</span></div>
    </div>
    <div id="pub-list">Loading publications...</div>
</section>

</main>
</div>

<script>
// Animate Counters
function animateCounter(id, target){
    const el=document.getElementById(id);
    let count=0;
    const step=Math.ceil(target/50);
    const interval=setInterval(()=>{
        count+=step;
        if(count>=target){count=target; clearInterval(interval);}
        el.textContent=count;
    },20);
}

animateCounter('countries-counter', 18);
animateCounter('ski-counter', 25);
animateCounter('dives-counter', 12);

// News Articles
const newsArticles = [
  {title:'Anesthesia Resident Receives Two Awards at International Meeting', url:'https://anesthesia.utoronto.ca/news/anesthesia-resident-receives-two-awards-society-neuroscience-anesthesiology-and-critical-care'},
  {title:'Researchers find that race matters in recovery after cancer surgery', url:'https://www.uhnresearch.ca/news/race-matters-recovery'},
  {title:'Toronto entrepreneurs win medtech pitch competition', url:'https://www.ideation.clinic/news/challenge-winner-specifix'}
];

const API_KEY = "9a71cb507a453d96a0e0c017e1f7ec00";

async function fetchPreview(url) {
  try {
    const res = await fetch(`https://api.linkpreview.net/?key=${API_KEY}&q=${encodeURIComponent(url)}`);
    const data = await res.json();
    return data;
  } catch(e) {
    console.error("Preview fetch error:", e);
    return null;
  }
}

async function renderNews() {
  const container = document.getElementById("news-grid");
  for (let article of newsArticles) {
    const preview = await fetchPreview(article.url);
    if (preview && preview.image) {
      const div = document.createElement("div");
      div.className = "news-card";
      div.innerHTML = `
        <a href="${preview.url}" target="_blank">
          <img src="${preview.image}" alt="${preview.title}">
          <p>${preview.title}</p>
        </a>
      `;
      container.appendChild(div);
    }
  }
}

renderNews();

/* PUBMED CODE REMAINS THE SAME (truncated to save space) */

</script>
</body>
</html>
